{# templates/streak/_streak_card.html #}
<div class="bg-gradient-to-r from-orange-50 via-amber-50 to-white border border-orange-100 rounded-2xl shadow-sm p-4 flex items-center gap-4">
  <div class="flex-shrink-0">
    <div class="h-12 w-12 rounded-2xl bg-orange-100 flex items-center justify-center shadow-inner">
      <span class="text-2xl">ğŸ”¥</span>
    </div>
  </div>
  <div class="flex-1">
    {% if streak.current_streak > 0 %}
      <div class="flex items-center gap-2">
        <p class="text-sm text-orange-700 font-semibold">Chuá»—i hiá»‡n táº¡i</p>
        <span class="text-[11px] px-2 py-0.5 rounded-full bg-orange-100 text-orange-700">Giá»¯ nhá»‹p nhÃ©!</span>
      </div>
      <p class="text-3xl font-bold text-slate-900 leading-tight" id="streak-number" data-streak="{{ streak.current_streak }}">
        {{ streak.current_streak }} ngÃ y
      </p>
      <div class="flex items-center gap-3 text-[12px] text-slate-600 mt-1">
        <span>ğŸ¯ Má»¥c tiÃªu ngÃ y: 10 phÃºt</span>
        <span class="text-slate-400">â€¢</span>
        <span>Ká»· lá»¥c: <strong class="text-slate-800">{{ streak.longest_streak }}</strong> ngÃ y</span>
        {% if streak.last_active_date %}
          <span class="text-slate-400">â€¢</span>
          <span>Cuá»‘i cÃ¹ng: {{ streak.last_active_date }}</span>
        {% endif %}
      </div>
    {% else %}
      <p class="text-sm text-gray-700 font-medium">
        Báº¯t Ä‘áº§u streak Ä‘áº§u tiÃªn cá»§a báº¡n hÃ´m nay! ğŸ¯
      </p>
      <p class="text-xs text-gray-500 mt-1">
        HoÃ n thÃ nh Ã­t nháº¥t 1 bÃ i há»c Ä‘á»ƒ cÃ³ ngÃ y streak Ä‘áº§u tiÃªn.
      </p>
    {% endif %}
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const el = document.getElementById('streak-number');
  if (!el) return;

  const target = parseInt(el.dataset.streak, 10) || 0;
  let current = 0;
  const duration = 600; // ms
  const start = performance.now();

  function animate(now) {
    const progress = Math.min((now - start) / duration, 1);
    current = Math.round(progress * target);
    el.textContent = current;
    if (progress < 1) requestAnimationFrame(animate);
  }

  requestAnimationFrame(animate);
});
</script>
