{% extends "admin/base_site.html" %}
{% load i18n %}

{% block title %}Import Vocabulary JSON{% endblock %}

{% block content %}
<div class="max-w-5xl">
  <div class="mb-4">
    <h1 class="text-2xl font-semibold text-slate-900">{% trans "Import Vocabulary from JSON" %}</h1>
    <p class="mt-1 text-sm text-slate-600">
      {% trans "Paste JSON array or single object. Required fields: jp_kana, vi_meaning. Optional: jp_kanji, sino_vi, jlpt_level, topic, example_jp, example_vi, is_active." %}
    </p>
  </div>

  <div class="bg-white border border-slate-200 rounded-2xl shadow-sm p-5">
    <form method="post" novalidate class="space-y-4">
      {% csrf_token %}

      <div>
        <label for="id_payload" class="block text-sm font-semibold text-slate-800 mb-1">{% trans "JSON data" %}</label>
        <textarea name="payload" id="id_payload" rows="14"
                  class="w-full font-mono text-xs sm:text-sm rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
        >{{ payload|default:"" }}</textarea>
      </div>

      <div class="grid sm:grid-cols-3 gap-3">
        <div>
          <label for="id_default_jlpt" class="block text-sm font-medium text-slate-700 mb-1">{% trans "Default JLPT (optional)" %}</label>
          <input type="text" name="default_jlpt" id="id_default_jlpt" value="{{ default_jlpt|default:"" }}"
                 class="w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm"
                 placeholder="N5 / N4 / N3 / N2 / N1">
        </div>
        <div>
          <label for="id_default_topic" class="block text-sm font-medium text-slate-700 mb-1">{% trans "Default topic (optional)" %}</label>
          <input type="text" name="default_topic" id="id_default_topic" value="{{ default_topic|default:"" }}"
                 class="w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm"
                 placeholder="Gia đình, Mua sắm...">
        </div>
        <div>
          <label for="id_default_active" class="block text-sm font-medium text-slate-700 mb-1">{% trans "Set active" %}</label>
          <select name="default_active" id="id_default_active" class="w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm">
            <option value="true" {% if default_active != "false" %}selected{% endif %}>{% trans "True" %}</option>
            <option value="false" {% if default_active == "false" %}selected{% endif %}>{% trans "False" %}</option>
          </select>
        </div>
      </div>

      <div class="flex items-center gap-2 pt-2">
        <button type="submit"
                class="inline-flex items-center justify-center px-4 py-2 rounded-xl bg-blue-600 text-white text-sm font-semibold hover:bg-blue-700">
          {% trans "Import" %}
        </button>
        <a class="inline-flex items-center justify-center px-4 py-2 rounded-xl border border-slate-200 text-sm font-semibold hover:bg-slate-50"
           href="{% url 'admin:vocab_vocabulary_changelist' %}">
          {% trans "Cancel" %}
        </a>
      </div>
    </form>
  </div>

  <details class="mt-4">
    <summary class="cursor-pointer text-sm font-semibold text-slate-700">Sample JSON</summary>
    <pre class="mt-2 whitespace-pre-wrap bg-slate-50 p-4 rounded-2xl border border-slate-200 text-xs">
[
  {
    "jp_kana": "ありがとう",
    "jp_kanji": "",
    "vi_meaning": "Cảm ơn",
    "sino_vi": "",
    "jlpt_level": "N5",
    "topic": "Chào hỏi",
    "example_jp": "ありがとう ございます",
    "example_vi": "Xin cảm ơn"
  },
  {
    "jp_kana": "食べる",
    "jp_kanji": "食べる",
    "vi_meaning": "Ăn",
    "sino_vi": "Thực",
    "jlpt_level": "N5",
    "topic": "Động từ",
    "example_jp": "ご飯を食べる",
    "example_vi": "Ăn cơm"
  }
]
    </pre>
  </details>
</div>
{% endblock %}

